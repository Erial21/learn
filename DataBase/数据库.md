
### 数据库默认端口
**3306**

### 事务
满足ACID特性的一系列操作, 可以通过commit提交一个事务, rollback回滚一个事务

### ACID特性
在数据库关系系统写入或更新资料时, 保证事务(transaction)是正确可靠的. 
- 原子性(atomicity): 
  - 事务被视为不可分割的最小单元, 要么全部完成, 要么全部不完成, 出错就回滚到事务开始前的状态.
  - 回滚用回滚日志实现, 反向执行回滚日志中记录的修改操作
- 一致性(consistency): 
  - 事务开始前和结束后, 数据库完整性没有被破坏
- 隔离性(isolation): 
  - 并发事务执行时, 保持数据一致性
  - 事务做的修改在最终提交前, 对其他事务不可见. 
- 持久性(durability): 
  - 事务结束后, 对数据库的修改是永久的, 系统故障也不会丢失. 
  - 重做日志可以保证持久性

### binlog
二进制日志, 记录数据库表结构的变更, 只有造成数据修改的操作会被记录, SELECT, SHOW 这类操作将不被记录

### SQL语句分类
- DDL(Data Definition Language)数据定义语言
  - 用来定义数据库对象: 数据库, 表, 列等. 
  - 关键字: CREATE, DROP, ALTER等
- DML(Data Manipulation Language)数据操作语言
  - 对数据进行增删改. 
  - INSERT, DELETE, UPDATE等
- DQL(Data Query Language)数据查询语言
  - 查询记录数据
  - SELECT, WHERE等
- DCL(Data Control Language)数据控制语言(了解)
  - 定义数据可访问权限和安全级别
  - GRANT, REVOKE等

### 隔离级别(隔离性)
- 未提交读(READ UNCOMMITTED)
  - 事务中的修改, 即使没有提交, 对其他事务也是可见的
- 提交读(READ COMMITTED)
  - 一个事务只能读取已提交事务所做的修改, 未提交的事务对其他事务不可见
- 可重复读(REPEATABLE READ)
  - 保证在同一个事物中, 多次读取同一数据的结果是一样的.
- 可串行化(SERIALIZABLE)
  - 强制事务串行执行. 需要加锁, 其他隔离通常不需要.

### 提高查询效率
https://blog.csdn.net/search_forever/article/details/78891507

### 是否使用索引
根据表的大小来决定是否使用索引

小的表不应该使用索引, 直接全表扫描比建立索引更高效

中大型表使用索引就非常有效

特大型表, 使用索引时, 建立和维护索引的代价会随表的增大而增大. 这时可以使用分区技术

### 索引底层的数据结构是什么
B+ 树
#### B+树什么结构
B(balance) 平衡树

[B+树详细](B+Tree.md)

### B+树与B树的区别

- B+树中间的非叶子节点不保存数据, 拥有更大的出度和更小的深度
- B+树必须查找到叶子节点, B树只要键匹配就可以停止, B+树更加稳定
- 对于范围查找和元素遍历, B+树只需要遍历叶子节点的链表, B树则要重复的中序遍历
- B树只适合随机查找, B+树支持随机查找和顺序查找
- B+树出度高, 深度小, IO操作少, 效率更高, 磁盘读写代价更小
- B+树查找效率更稳定
- 增删文件时, B+树效率更高

### 数据库四种连接方式
1. 内连接 inner join
   - 使用比较运算符, 根据每个表共有的列, 匹配行
2. 左连接 left join
   - 左表一个一个查询连接, 没有的置于NULL
3. 右连接 right join
   - 右表一个一个查询连接, 左表没有的置空
4. 完全链接 full join
   - 左表和右表进行匹配组合
   - 左有右无的, 保留左, 剩下的地方置空
   - 左无右有的, 保留右, 剩下的地方置空

### 并发一致性
- 丢失修改
- 读脏数据
- 不可重复读
- 幻影读

### 存储引擎

- InnoDB
  - mysql默认引擎
  - 主索引是聚簇索引
- MyISAM

- 比较
  - 事务：InnoDB 是事务型的，可以使用 Commit 和 Rollback 语句。
  - 并发：MyISAM 只支持表级锁，而 InnoDB 还支持行级锁。
  - 外键：InnoDB 支持外键。
  - 备份：InnoDB 支持在线热备份。
  - 崩溃恢复：MyISAM 崩溃后发生损坏的概率比 InnoDB 高很多，而且恢复的速度也更慢。
  - 其它特性：MyISAM 支持压缩表和空间数据索引。

### mysql mvcc
mvcc 多版本并发控制, innodb实现隔离级别的方式, 提交读, 可重复读隔离级别

### mysql存储引擎类

[mysql存储引擎类区别](https://blog.csdn.net/wangxinyao1997/article/details/93079544)
  
### innodb事务支持什么隔离级别
四个都支持

默认: 可重复读

### 数据库join 的底层实现
个人理解:
- mysql的join算法是Nested-Loop Join（嵌套循环连接）
- 要连接的两张表可以分为驱动表和被驱动表
- 在连接的时候会对驱动表进行全表扫描，然后根据join的列在被驱动表中进行匹配

因此在进行多表关联的时候，**建议把小的表作为驱动表**，然后大的表作为被驱动表，而且保证被驱动表的关联字段应该建立索引，加快匹配

### 




















